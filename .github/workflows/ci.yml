name: P2P Chat CICD testing pipeline
on: [push, pull_request]
jobs:
    testing:
        name: Building and tesing
        runs-on: ubuntu-latest
        steps:
            - name: Install essentials
              run: sudo apt-get update && sudo apt-get install -y clang-format clang-tidy bazel
            
            - name: Build project
              run: sudo bazel build --config=debug \
                                    --config=gcc11
                                    --config=clang-format \
                                    --config=clang-tidy \
                                    --config=ubsan \
                                    --config=asan \
                                    --config=ci
            - name: Testing
              run: sudo bazel test :all